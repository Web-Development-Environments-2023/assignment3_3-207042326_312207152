"use strict";(self["webpackChunkassignment_3_3"]=self["webpackChunkassignment_3_3"]||[]).push([[16],{2016:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container",attrs:{id:"searchId"}},[r("h1",{staticClass:"title",staticStyle:{color:"4f3852","text-shadow":"0 0 2px white"}},[e._v("Search Page")]),r("b-navbar",{staticStyle:{margin:"10px","background-color":"#FAF9F6"},attrs:{toggleable:"lg",type:"light"}},[r("b-navbar-nav",[r("b-nav-form",{on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},[r("b-form-input",{staticClass:"mr-sm-2",attrs:{variant:"outline-secondary",placeholder:"Your search",type:"text"},on:{change:e.onChangeQuery},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})],1),r("b-nav-item-dropdown",{staticStyle:{"font-family":"sans-serif","font-weight":"bold"},attrs:{text:"Number of search results"},on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},e._l(e.numbers,(function(t,n){return r("b-dropdown-item",{key:n,on:{click:function(r){e.number=t}}},[e._v(" "+e._s(t)+" ")])})),1),r("b-nav-item-dropdown",{staticStyle:{"font-family":"sans-serif","font-weight":"bold"},attrs:{text:"Diet"},on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},e._l(e.diets,(function(t,n){return r("b-dropdown-item",{key:n,on:{click:function(r){e.form.diet=t}}},[e._v(" "+e._s(t)+" ")])})),1),r("b-nav-item-dropdown",{staticStyle:{"font-family":"sans-serif","font-weight":"bold"},attrs:{text:"Cuisine"},on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},e._l(e.cuisines,(function(t,n){return r("b-dropdown-item",{key:n,on:{click:function(r){e.form.cuisine=t}}},[e._v(" "+e._s(t)+" ")])})),1),r("b-nav-item-dropdown",{staticStyle:{"font-family":"sans-serif","font-weight":"bold"},attrs:{text:"Intolerances"},on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},e._l(e.intoleranceses,(function(t,n){return r("b-dropdown-item",{key:n,on:{click:function(r){e.form.intolerances=t}}},[e._v(" "+e._s(t)+" ")])})),1),r("b-nav-item-dropdown",{staticStyle:{"font-family":"sans-serif","font-weight":"bold"},attrs:{text:"Sort by"},on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},[r("b-dropdown-item",{attrs:{href:"#",variant:this.sort_time},on:{click:function(t){return e.sortBy("time")}}},[e._v(" Preparation time")]),r("b-dropdown-item",{attrs:{href:"#",variant:this.sort_popularity},on:{click:function(t){return e.sortBy("popularity")}}},[e._v("Popularity")])],1),r("b-nav-form",{on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},[r("b-button",{staticClass:"my-2 my-sm-0",attrs:{variant:"primary",type:"submit"},on:{click:e.onSearch}},[e._v("Search ")]),r("b-button",{staticClass:"my-2 my-sm-0",attrs:{variant:"warning",type:"reset"},on:{click:e.onReset}},[e._v("Reset ")])],1)],1)],1),e.searched>0?r("div",[r("RecipePreviewList",{attrs:{title:"Search Results",log_in:Boolean(e.$root.store.username),searched:e.searched,query:e.query,number:e.number,cuisine:e.form.cuisine,diet:e.form.diet,intolerance:e.form.intoleranceses,sort:e.sortby}})],1):e.$root.store.lastSearch?r("div",[r("RecipePreviewList",{attrs:{title:"Last Search",log_in:Boolean(e.$root.store.username)}})],1):e._e()],1)},s=[],i=r(5957),a=r(124),o=r(8534),c=(r(7658),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("h3",[e._v(" "+e._s(e.title)+": "),e._t("default")],2),e.no_results?r("div",[r("h4",[e._v("There is no results ☹️")])]):r("div",[r("b-row",e._l(e.recipes,(function(t){return r("b-row",{key:t.id},[r("RecipePreview",{staticClass:"recipePreview",attrs:{recipe:t,log_in:e.log_in,title:e.title}})],1)})),1)],1)])}),u=[],l=(r(9653),r(2707),r(5433));const p={name:"RecipePreviewList",components:{RecipePreview:l.Z},props:{title:{type:String,required:!0},log_in:{type:Boolean,required:!1,default:!1},searched:{type:Number,required:!1},query:{type:String,required:!1},number:{type:String,required:!1},cuisine:{type:String,required:!1},diet:{type:String,required:!1},intolerance:{type:String,required:!1},sortby:{type:String,required:!1}},watch:{searched:{handler:function(){console.log("in watch"),this.searched>0&&(console.log("in searched function"),this.updateRecipes())},immediate:!0}},data:function(){return{recipes:[],no_results:!1}},created:function(){this.updateRecipes()},methods:{updateRecipes:function(){var e=this;return(0,o.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("in updateRecipes"),console.log(e.searched),t.prev=2,"Explore This Recipes"!=e.title){t.next=8;break}return t.next=6,e.randomRecipes();case 6:t.next=31;break;case 8:if("Last Viewed Recipes"!=e.title){t.next=13;break}return t.next=11,e.lastViewedRecipes();case 11:t.next=31;break;case 13:if("My Favorite Recipes"!=e.title){t.next=18;break}return t.next=16,e.favoriteRecipes();case 16:t.next=31;break;case 18:if("My Recipes"!=e.title){t.next=23;break}return t.next=21,e.myRecipes();case 21:t.next=31;break;case 23:if("Search Results"!=e.title){t.next=28;break}return t.next=26,e.searchRecipes();case 26:t.next=31;break;case 28:if("Last Search"!=e.title){t.next=31;break}return t.next=31,e.LastSearch();case 31:t.next=36;break;case 33:t.prev=33,t.t0=t["catch"](2),console.log(t.t0);case 36:case"end":return t.stop()}}),t,null,[[2,33]])})))()},randomRecipes:function(){var e=this;return(0,o.Z)((0,a.Z)().mark((function t(){var r,n,s;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get(e.$root.store.server_domain+"/recipes/random");case 3:n=t.sent,s=n.data.recipes,e.recipes=[],(r=e.recipes).push.apply(r,(0,i.Z)(s)),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},lastViewedRecipes:function(){var e=this;return(0,o.Z)((0,a.Z)().mark((function t(){var r,n,s;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=[],console.log(e.$root.store.server_domain+"/recipes/watched"),t.next=5,e.axios.get(e.$root.store.server_domain+"/recipes/watched",{withCredentials:!0});case 5:r=t.sent,console.log(r),r==[]?e.no_results=!0:(n=r.data,e.recipes=[],(s=e.recipes).push.apply(s,(0,i.Z)(n))),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},favoriteRecipes:function(){var e=this;return(0,o.Z)((0,a.Z)().mark((function t(){var r,n,s;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e.$root.store.server_domain+"/user/favorites"),t.next=4,e.axios.get(e.$root.store.server_domain+"/user/favorites",{withCredentials:!0});case 4:r=t.sent,console.log(r),r==[]?e.no_results=!0:(n=r.data,e.recipes=[],(s=e.recipes).push.apply(s,(0,i.Z)(n))),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},myRecipes:function(){var e=this;return(0,o.Z)((0,a.Z)().mark((function t(){var r,n,s;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get(e.$root.store.server_domain+"/user/myRecipes",{withCredentials:!0});case 3:r=t.sent,console.log(r),0==r.data.length?e.no_results=!0:(n=r.data,e.recipes=[],(s=e.recipes).push.apply(s,(0,i.Z)(n))),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},searchRecipes:function(){var e=this;return(0,o.Z)((0,a.Z)().mark((function t(){var r,n,s;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("in searchRecipes"),t.prev=1,console.log(e.$root.store.server_domain+"/recipes/search?searchQuery="+e.query+"&number="+e.number+"&cuisine="+e.cuisine+"&diet="+e.diet+"&intolerances="+e.intolerances),t.next=5,e.axios.get(e.$root.store.server_domain+"/recipes/search?searchQuery="+e.query+"&number="+e.number+"&cuisine="+e.cuisine+"&diet="+e.diet+"&intolerances="+e.intolerances);case 5:r=t.sent,n=r.data,console.log(r.data),"There is no results!"==n?e.no_results=!0:(e.recipes=[],(s=e.recipes).push.apply(s,(0,i.Z)(n)),"aggregateLikes"==e.sortby?e.recipes=e.recipes.sort((function(e,t){return e.aggregateLikes-t.aggregateLikes})):"readyInMinutes"==e.sortby&&(e.recipes=e.recipes.sort((function(e,t){return e.readyInMinutes-t.readyInMinutes})))),e.$root.store.setLastSearch(e.recipes),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()},LastSearch:function(){this.recipes=[],console.log(this.$root.store.lastSearch),this.recipes=this.$root.store.lastSearch}}},h=p;var d=r(1001),f=(0,d.Z)(h,c,u,!1,null,"71f73c0c",null);const m=f.exports,v=["Gluten Free","Ketogenic","Vegetarian","Lacto-Vegetarian","Ovo-Vegetarian","Vegan","Pescetarian","Paleo","Primal","Low FODMAP","Whole30"],y=["5","10","15"],b=["African","American","British","Cajun","Caribbean","Chinese","Eastern European","European","French","German","Greek","Indian","Irish","Italian","Japanese","Jewish","Korean","Latin American","Mediterranean","Mexican","Middle Eastern","Nordic","Southern","Spanish","Thai","Vietnamese"],g=["Dairy","Egg","Gluten","Grain","Peanut","Seafood","Sesame","Shellfish","Soy","Sulfite","Tree Nut","Wheat"],w={name:"SearchPage",components:{RecipePreviewList:m},data:function(){return{searched:0,query:"",number:"",form:{cuisine:"",diet:"",intolerances:""},submitError:[],numbers:[{value:null,text:"",disabled:!0}],cuisines:[{value:null,text:"",disabled:!0}],diets:[{value:null,text:"",disabled:!0}],intoleranceses:[{value:null,text:"",disabled:!0}],sortby:"",lastsearch:"",sort_time:"s",sort_popularity:"s"}},created:function(){var e=this;return(0,o.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("in Search Page"),e.getLastSearch();case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){var e,t,r,n;(e=this.numbers).push.apply(e,(0,i.Z)(y)),this.numbers.shift(),this.number=this.numbers[0],(t=this.cuisines).push.apply(t,(0,i.Z)(b)),this.cuisines.shift(),(r=this.diets).push.apply(r,(0,i.Z)(v)),this.diets.shift(),(n=this.intoleranceses).push.apply(n,(0,i.Z)(g)),this.intoleranceses.shift()},methods:{onChangeQuery:function(){console.log("in onChangeQuery"),this.$emit("query",this.query)},onSearch:function(){console.log("in OnSearch"),this.searched+=1,this.lastsearch=this.query},onReset:function(){this.query="",this.number=this.numbers[0],this.form.diet="",this.form.cuisine="",this.form.intolerances="",this.sortby="",this.sort_time="s",this.sort_popularity="s",this.searched=0},sortBy:function(e){"time"==e?"readyInMinutes"==this.sortby?(this.sortby="",this.sort_time="s"):(this.sortby="readyInMinutes",this.sort_time="p",this.sort_popularity="s"):"popularity"==e&&("aggregateLikes"==this.sortby?(this.sortby="",this.sort_popularity="s"):(this.sortby="aggregateLikes",this.sort_popularity="p",this.sort_time="s")),searched>0&&(this.searched+=1)},getLastSearch:function(){return(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}},_=w;var x=(0,d.Z)(_,n,s,!1,null,null,null);const k=x.exports}}]);
//# sourceMappingURL=16.1add04fc.js.map